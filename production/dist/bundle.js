!function(e){var t={};function s(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=t,s.d=function(e,t,o){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(s.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(o,n,function(t){return e[t]}.bind(null,n));return o},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=0)}([function(e,t,s){"use strict";s.r(t);const o={clicked:"clicked",cell:"cell",closed:"closed",bomb:"bomb",flagged:"flagged"};class n{static cellCheck(e){return e.classList.contains(o.cell)}static clickedCheck(e){return e.classList.contains(o.clicked)}static closedCheck(e){return e.classList.contains(o.closed)}static bombCheck(e){return e.classList.contains(o.bomb)}static flaggedCheck(e){return e.classList.contains(o.flagged)}static removeClass(e,t){e.classList.remove(t)}static addClass(e,t){e.classList.add(t)}}const l={bomb:"red",clearCell:"teal",flag:"#e5e04a",one:"lime",twoOrThree:"orange",moreThanThree:"skyblue"};class i{getBombs(e,t,s){const o=[];for(let n=0;n<e;n++){const e=this._getRandomPosition(t*s);this._isNewPosition(e,o)?o.push(e):n--}return o}_getRandomPosition(e){let t=0;return t=Math.random()*e,t=Math.floor(t)}_isNewPosition(e,t){return-1==t.indexOf(e)}getPositions(e,t,s){const o=[],n={index:0};for(let l=0;l<t;l++){const t=this._createPositionsRow(e,s,n);o.push(t)}return o}_createPositionsRow(e,t,s){const o=[];for(let n=0;n<t;n++){const t=this._createCell(e,s);o.push(t),s.index++}return o}_createCell(e,t){const s=document.createElement("div");return~e.indexOf(t.index)&&n.addClass(s,o.bomb),n.addClass(s,o.cell),n.addClass(s,o.closed),s}getNumberColor(e){return 1==e?l.one:2==e||3==e?l.twoOrThree:l.moreThanThree}getBombsNumber(e,t,s,o,n){let l=0;return this._cellExists(e+1,t,s)&&(l+=this._bombCheck(s[e+1][t])),this._cellExists(e-1,t,s)&&(l+=this._bombCheck(s[e-1][t])),this._cellExists(e,t+1,s)&&(l+=this._bombCheck(s[e][t+1])),this._cellExists(e,t-1,s)&&(l+=this._bombCheck(s[e][t-1])),this._cellExists(e+1,t+1,s)&&(l+=this._bombCheck(s[e+1][t+1])),this._cellExists(e+1,t-1,s)&&(l+=this._bombCheck(s[e+1][t-1])),this._cellExists(e-1,t+1,s)&&(l+=this._bombCheck(s[e-1][t+1])),this._cellExists(e-1,t-1,s)&&(l+=this._bombCheck(s[e-1][t-1])),l}_cellExists(e,t,s){try{return s[e][t].className,!0}catch(e){return!1}}_bombCheck(e){return e.classList.contains(o.bomb)}}class r{openCells({rows:e,columns:t,positions:s}){for(let o=0;o<e;o++)this._goThroughTheRow(o,e,t,s)}_goThroughTheRow(e,t,s,l){for(let i=0;i<s;i++){const r=l[e][i];n.clickedCheck(r)&&(n.removeClass(r,o.clicked),n.removeClass(r,o.closed),this._setBombsNumber(e,i,l,t,s),this._openLeftCell(e,i-1,l,t,s),this._openRightCell(e,i+1,l,t,s),this._openUpperCell(e-1,i,l,t,s),this._openLowerCell(e+1,i,l,t,s))}}_setBombsNumber(e,t,s,o,n){const l=new i,r=l.getBombsNumber(e,t,s,o,n);return r>0&&(s[e][t].style.color=l.getNumberColor(r),s[e][t].innerHTML=`<p>${r}</p>`),r}_openLeftCell(e,t,s,l,i){if(this._isIndexInRow(e,l)&&this._isIndexInColumn(t,i)){const r=s[e][t],c=s[e][t+1];n.closedCheck(r)&&(n.removeClass(c,o.closed),n.removeClass(r,o.closed),n.bombCheck(r)||n.flaggedCheck(r)?(n.addClass(r,o.closed),this._setBombsNumber(e,t+1,s,l,i)):(s[e][t].style.backgroundColor="teal",this._openUpperCell(e-1,t,s,l,i),this._openLowerCell(e+1,t,s,l,i),0==this._setBombsNumber(e,t,s,l,i)&&this._openLeftCell(e,t-1,s,l,i)))}}_isIndexInRow(e,t){return e>=0&&e<t}_isIndexInColumn(e,t){return e>=0&&e<t}_openRightCell(e,t,s,l,i){if(this._isIndexInRow(e,l)&&this._isIndexInColumn(t,i)){const r=s[e][t],c=s[e][t-1];n.closedCheck(r)&&(n.removeClass(c,o.closed),n.removeClass(r,o.closed),n.bombCheck(r)||n.flaggedCheck(r)?(n.addClass(r,o.closed),this._setBombsNumber(e,t-1,s,l,i)):(s[e][t].style.backgroundColor="teal",this._openUpperCell(e-1,t,s,l,i),this._openLowerCell(e+1,t,s,l,i),0==this._setBombsNumber(e,t,s,l,i)&&this._openRightCell(e,t+1,s,l,i)))}}_openUpperCell(e,t,s,l,i){if(this._isIndexInRow(e,l)&&this._isIndexInColumn(t,i)){const r=s[e][t],c=s[e+1][t];n.closedCheck(r)&&(n.removeClass(c,o.closed),n.removeClass(r,o.closed),n.bombCheck(r)||n.flaggedCheck(r)?(n.addClass(r,o.closed),this._setBombsNumber(e+1,t,s,l,i)):(s[e][t].style.backgroundColor="teal",this._openLeftCell(e,t-1,s,l,i),this._openRightCell(e,t+1,s,l,i),0==this._setBombsNumber(e,t,s,l,i)&&this._openUpperCell(e-1,t,s,l,i)))}}_openLowerCell(e,t,s,l,i){if(this._isIndexInRow(e,l)&&this._isIndexInColumn(t,i)){const r=s[e][t],c=s[e-1][t];n.closedCheck(r)&&(n.removeClass(c,o.closed),n.removeClass(r,o.closed),n.bombCheck(r)||n.flaggedCheck(r)?(n.addClass(r,o.closed),this._setBombsNumber(e-1,t,s,l,i)):(s[e][t].style.backgroundColor="teal",this._openLeftCell(e,t-1,s,l,i),this._openRightCell(e,t+1,s,l,i),0==this._setBombsNumber(e,t,s,l,i)&&this._openLowerCell(e+1,t,s,l,i)))}}}class c{static setFlags(e,t){const s=document.querySelector(".flags-left");t?e>=0&&e<=t&&(s.innerHTML=e):s.innerHTML=e}static getFlags(){return document.querySelector(".flags-left").innerHTML}}const a={backdrop:".backdrop",modal:".modal",header:".modal__header",close:".modal__close",content:".modal__content",buttons:".modal__buttons"},m={width:"500px",height:"400px",header:{images:["./img/smiling.png","./img/smiling.png"],text:"Модальное окно"},content:{inputs:null,text:"Текст модального окна"},buttons:['<div class="ok btn">Ок</div>','<div class="close btn">Закрыть</div>'],showClose:!0},d={visible:"block",hidden:"none",flex:"flex"};class h{constructor(){this._backdrop=document.querySelector(a.backdrop),this._modal=document.querySelector(a.modal),this._modalHeader=document.querySelector(a.header),this._modalContent=document.querySelector(a.content),this._modalButtons=document.querySelector(a.buttons)}setSettings(e){this._modalSettings=e||m}tune(){this._modal.style.width=this._modalSettings.width,this._modal.style.height=this._modalSettings.height,this._modal.style.top=this._countTopOffset(),this._modal.style.left=this._countLeftOffset(),this._modalHeader.innerHTML=this._modalSettings.header,this._modalContent.innerHTML=this._modalSettings.content,this._modalButtons.innerHTML=this._modalSettings.buttons}_countTopOffset(){const e=document.documentElement.clientHeight,t=this._modalSettings.height;return e/3-parseInt(t)/3+"px"}_countLeftOffset(){const e=document.documentElement.clientWidth,t=this._modalSettings.width;return e/2-parseInt(t)/2+"px"}show(){this._backdrop.style.display=d.visible,this._modal.style.display=d.visible}hide(){this._backdrop.style.display=d.hidden,this._modal.style.display=d.hidden}}const u={smiling:"img/smiling.png",withTongue:"img/with_tongue.png",demon:"img/demon.png"},g={smileImg:".sapper__header-smile img"};class _{static set(){const e=document.querySelector(g.smileImg);e.addEventListener("mousedown",()=>{~e.src.indexOf("demon")||(e.src=u.withTongue)}),e.addEventListener("click",()=>{~e.src.indexOf("demon")||(e.src=u.smiling)}),e.addEventListener("mouseout",()=>{~e.src.indexOf("demon")||(e.src=u.smiling)})}static showDemon(){document.querySelector(g.smileImg).src=u.demon}static showSmile(){document.querySelector(g.smileImg).src=u.smiling}}class b{constructor(){b.timerMinutes=document.querySelector(".timer .timer__minutes"),b.timerSeconds=document.querySelector(".timer .timer__seconds"),b.timerId=null}static start(){let e=0,t="00";b.timerId=setInterval(()=>{60==++e&&(t++,t=b._correctMinutes(t),e=0),b._updateTime(t,e)},1e3)}static _correctMinutes(e){return e<10&&(e="0"+e),e}static _updateTime(e,t){t=b._correctSeconds(t),b.timerSeconds.innerHTML=t,b.timerMinutes.innerHTML=e}static _correctSeconds(e){return e<10&&(e="0"+e),e}static stop(){b.timerId&&clearInterval(b.timerId)}static clear(){b.timerSeconds.innerHTML="00",b.timerMinutes.innerHTML="00"}}const p={restart:".modal__buttons .restart",save:".modal__buttons .save"},y={bomb:"<img src='img/bomb.png'>",flag:"<img src='img/flag.png'>"},w={width:"500px",height:"280px",header:"<img src='img/demon.png'>\n           <h1>Буууум!</h1>\n           <img src='img/demon.png'>",content:"<div class='text'>\n              <p class='text-line'>Ничего :)</p>\n              <p class='text-line'>В следующий раз все получится!</p>\n            </div>",buttons:'<div class="restart btn">Переиграть!</div>'},C={width:"500px",height:"280px",header:"<img src='img/with_tongue.png'>\n           <h1>Победа!</h1>\n           <img src='img/with_tongue.png'>",content:"<div class='text'>\n              <p class='text-line'>Молодец! :)</p>\n              <p class='text-line'>Это было нелегко, но ты справился!</p>\n            </div>",buttons:'<div class="restart btn">Новая игра!</div>\n            <div class="save btn">Сохранить результат</div>'};class k{constructor(){this.algorithm=new r,this.modal=new h}cellLeftClick(e){e.field.onclick=(t=>{const s=t.target;n.cellCheck(s)&&this._workWithCell(s,e)})}_workWithCell(e,t){n.bombCheck(e)?(this._putBomb(e),t.open(),this._gameOver(t)):(this._openCurrentCell(e),this.algorithm.openCells(t),this._checkForWin(t))}_putBomb(e){e.style.backgroundColor=l.bomb,e.innerHTML=y.bomb}_gameOver(e){b.stop(),_.showDemon(),this._showLossModal();const t=document.querySelector(p.restart);(new H).restartGame(t,this.modal,e)}_showLossModal(){this.modal.setSettings(w),this.modal.tune(),this.modal.show()}_openCurrentCell(e){e.style.backgroundColor=l.clearCell,n.addClass(e,o.clicked)}_checkForWin(e){let t=0,s=0;for(let o=0;o<e.rows;o++){const n=this._goThroughTheRow(o,e);t+=n.tempRightFlagsSet,s+=n.tempOpenedCells}const o=e.bombs.length,n=this._countClearCellsAmount(e);o==t&&n==s&&this._win(e)}_goThroughTheRow(e,t){let s=0,o=0;for(let l=0;l<t.columns;l++){const i=t.positions[e][l];n.bombCheck(i)&&n.flaggedCheck(i)&&s++,this._openedCellCheck(i)&&o++}return{tempRightFlagsSet:s,tempOpenedCells:o}}_openedCellCheck(e){switch(!0){case n.closedCheck(e):case n.bombCheck(e):case n.flaggedCheck(e):return!1}return!0}_countClearCellsAmount(e){const t=e.bombs.length;return e.rows*e.columns-t}cellRightClick(e){e.field.oncontextmenu=(t=>{t.preventDefault();const s=t.target;n.closedCheck(s)&&this._putFlag(s,e),n.flaggedCheck(s.parentNode)&&this._removeFlag(s.parentNode,e)})}_putFlag(e,t){c.getFlags()>0&&(n.addClass(e,o.flagged),e.innerHTML=y.flag,e.style.backgroundColor=l.flag,this._updateFlagsCount(-1,t),this._checkForWin(t))}_removeFlag(e,t){n.removeClass(e,o.flagged),e.style.backgroundColor="",e.innerHTML="",this._updateFlagsCount(1,t)}_updateFlagsCount(e,t){const s=+c.getFlags()+e;c.setFlags(s,t.bombs.length)}_win(e){b.stop(),this._showWinModal();const t=document.querySelector(p.restart),s=document.querySelector(p.save),o=new H;o.restartGame(t,this.modal,e),o.saveResults(s,this.modal,e)}_showWinModal(){this.modal.setSettings(C),this.modal.tune(),this.modal.show()}}const S={table:".records-table",backdrop:".backdrop",recordsList:".records-table .records__list",currentRecords:".records-table .records"};class f{constructor(){f.table=document.querySelector(S.table),f.backdrop=document.querySelector(S.backdrop)}static show(){f.table.style.display=d.visible,f.backdrop.style.display=d.visible}static hide(){f.table.style.display=d.hidden,f.backdrop.style.display=d.hidden}static update(){const e=localStorage;let t="";for(let s in e)if("string"==typeof e[s]){t+=f._createNewRecord(s,e[s])}f._setRecords(t)}static _createNewRecord(e,t){let s="";const o=t.split(" ");s+=`<div>${e}</div>`;for(let e=0;e<o.length;e++)s+=`<div>${o[e]}</div>`;return s=`<div class="records__item">${s}</div>`}static _setRecords(e){document.querySelector(S.recordsList).innerHTML=e||'<div class="empty">Список пуст.</div>'}static clear(){const e=document.querySelector(S.currentRecords);for(;e.children.length>0;)e.parentNode.removeChild(e.children[0])}}const v={width:"300px",height:"150px",headline:"Оповещение",message:"Что-то произошло",type:"alert"},x={alert:".alert",headline:".alert__headline",message:".alert__message p"},T={ok:'<img src="./img/ok.png" />',error:'<img src="./img/error.png" />'};class M{constructor(){this._timerId=null,this._alert=document.querySelector(x.alert)}setSettings(e){this._alertSettings=e||v}show(){this._killTimer(),this._tune(),this._alert.style.display=d.visible,this._timerId=setTimeout(()=>{this._hide()},3e3)}_killTimer(){this._timerId&&clearTimeout(this._timerId)}_tune(){this._alert.style.width=this._alertSettings.width,this._alert.style.height=this._alertSettings.height;const e=this._getAlertImageByType(),t=this._alert.querySelector(x.headline),s=this._alert.querySelector(x.message);t.innerHTML=this._formHeadline(e),s.innerHTML=this._alertSettings.message}_getAlertImageByType(){return this._checkAlert()?T.ok:T.error}_checkAlert(){return"alert"==this._alertSettings.type}_formHeadline(e){let t=e;return t+=`<p>${this._alertSettings.headline}</p>`}_hide(){this._alert.style.display=d.hidden}setMessage(e){this.message=e}}const I={nickName:".modal__content .nick-name",bombsAmount:".modal__content .bombs-amount",rows:".modal__content .rows",columns:".modal__content .columns"},q={width:"290px",height:"120px",headline:"Ошибка!",message:"Какая-то ошибка",type:"error"},N={noName:"Не заполнено имя!",bigName:"Максимальный размер имени 20 симоволов.",noFieldSize:"Не заполнен размер поля!",smallField:"Минимальный размер поля 5х5!",bigField:"Максимальный размер поля 20х20!",noBombsAmount:"Не заполнено количество бомб!",tooFewBombs:"Должна быть хотя бы одна бомба!",maxBombs:"Максимальное количество бомб: "};class R{static checkForGameStarting(){const e=document.querySelector(I.nickName),t=document.querySelector(I.bombsAmount),s=document.querySelector(I.rows),o=document.querySelector(I.columns);return!!(R._checkNickName(e)&&R._checkFieldSize(s,o)&&R._checkBombsAmount(t,s,o))}static _checkNickName(e){return e.value.length<1?(R._setAlertMessage(N.noName),R._showAlert(),!1):!(e.value.length>20)||(R._setAlertMessage(N.bigName),R._showAlert(),!1)}static _setAlertMessage(e){q.message=e}static _showAlert(){const e=new M;e.setSettings(q),e.show()}static _checkFieldSize(e,t){switch(!0){case e.value.length<1||t.value.length<1:return R._setAlertMessage(N.noFieldSize),R._showAlert(),!1;case e.value<5||t.value<5:return R._setAlertMessage(N.smallField),R._showAlert(),!1;case e.value>20||t.value>20:return R._setAlertMessage(N.bigField),R._showAlert(),!1}return!0}static _checkBombsAmount(e,t,s){if(e.value.length<1)return R._setAlertMessage(N.noBombsAmount),R._showAlert(),!1;if(e.value<1)return R._setAlertMessage(N.tooFewBombs),R._showAlert(),!1;const o=Math.round(t.value*s.value*.7);return!(e.value>o)||(R._setAlertMessage(N.maxBombs+o),R._showAlert(),!1)}static checkNumberInput(e){e.onkeydown=(e=>{const t=e.keyCode;190!=t&&110!=t&&188!=t||e.preventDefault()})}}const L={width:"250px",height:"100px",headline:"Оповещение",message:"Новая игра.",type:"alert"},A={width:"250px",height:"100px",headline:"Оповещение",message:"Рекорды были очищены!",type:"alert"},F={menuItems:".menu-list",start:".modal__buttons .start",close:".modal__buttons .close",nickName:".modal__content .nick-name",bombsAmount:".modal__content .bombs-amount",rows:".modal__content .rows",columns:".modal__content .columns",timerMinutes:".timer .timer__minutes",timerSeconds:".timer .timer__seconds"},B={width:"500px",height:"440px",header:"<img src='img/smiling.png'>\n           <h1>Настройки</h1>\n           <img src='img/with_tongue.png'>",content:"<p>Имя:</p>\n            <input class='nick-name' value='Player' type='text'>\n            <p>Размер поля:</p>\n            <div>\n              <input class='rows' value='12' type='number'>\n              <input class='columns' value='12' type='number'>\n            </div>\n            <p>Количество бомб:</p>\n            <input class='bombs-amount' value='40' type='number'>",buttons:'<div class="start btn">Сохранить</div>\n            <div class="close btn">Закрыть</div>'};class H{constructor(){this.modal=new h,this.alert=new M,this.gameController=new k}menuToggle(e){const t=document.querySelector(F.menuItems);t.style.display=d.hidden,e.onclick=(()=>{t.style.display=t.style.display==d.hidden?d.visible:d.hidden})}resetGame(e,t){e.onclick=(()=>{this._showResetModal(),this._setModalFieldsCheckers(),this._setNewDefaultSettings();const e=document.querySelector(F.start),s=document.querySelector(F.close);this.startGame(e,this.modal,t),this._setCloseButton(s)})}_showResetModal(){this.modal.setSettings(B),this.modal.tune(),this.modal.show()}_setModalFieldsCheckers(){const e=document.querySelector(F.rows),t=document.querySelector(F.columns),s=document.querySelector(F.bombsAmount);R.checkNumberInput(e),R.checkNumberInput(t),R.checkNumberInput(s)}_setNewDefaultSettings(){const e=this._getSettingsFromSessionStorage(),t=document.querySelector(F.nickName),s=document.querySelector(F.bombsAmount),o=document.querySelector(F.rows),n=document.querySelector(F.columns);t.value=e.nickName,o.value=e.rows,n.value=e.columns,s.value=e.bombsAmount}_setCloseButton(e){e.onclick=(()=>{this.modal.hide(),this._hideMenuItems()})}_hideMenuItems(){document.querySelector(F.menuItems).style.display=d.hidden}startGame(e,t,s){e.onclick=(()=>{R.checkForGameStarting()&&(this._prepareGameScreen(t,s),this.alert.setSettings(L),this.alert.show())})}_prepareGameScreen(e,t){e&&e.hide(),_.showSmile(),this._hideMenuItems(),this._redrawPlayField(t),this._restartTimer(),c.setFlags(t.bombs.length),this.gameController.cellLeftClick(t),this.gameController.cellRightClick(t)}_redrawPlayField(e){const t=this._getGameSettings();e.hide(),e.clear(),e.setSettings(t),e.draw()}_getGameSettings(){let e={};if(document.querySelector(F.nickName)){const t=document.querySelector(F.nickName),s=document.querySelector(F.bombsAmount),o=document.querySelector(F.rows),n=document.querySelector(F.columns);e={nickName:t.value,bombsAmount:s.value,rows:o.value,columns:n.value},this._setToSessionStorage(e)}else e=this._getSettingsFromSessionStorage();return e}_setToSessionStorage(e){let t="";t+=`${e.nickName}`,t+=` ${e.bombsAmount}`,t+=` ${e.rows}`,t+=` ${e.columns}`,sessionStorage.setItem("settings",t)}_getSettingsFromSessionStorage(){const e=sessionStorage.getItem("settings").split(" ");return{nickName:e[0],bombsAmount:+e[1],rows:+e[2],columns:+e[3]}}_restartTimer(){b.stop(),b.clear(),b.start()}restartGame(e,t,s){e.onclick=(()=>{this._prepareGameScreen(t,s),this.alert.setSettings(L),this.alert.show()})}showRecordsTable(e){e.onclick=(()=>{this._hideMenuItems(),f.update(),f.show()})}hideRecordsTable(e){e.onclick=(()=>{f.hide()})}clearRecords(e){e.onclick=(()=>{localStorage.clear(),this._hideMenuItems(),this.alert.setSettings(A),this.alert.show()})}saveResults(e){e.onclick=(()=>{const e=this._getGameSettings(),t=this._getResultRecord(e);localStorage.setItem(e.nickName,t),this._configurateSaveResultsAlert(e),this.alert.show()})}_getResultRecord(e){const t=document.querySelector(F.timerMinutes),s=document.querySelector(F.timerSeconds);return`${`${t.innerHTML}:${s.innerHTML}`} ${`${e.rows}x${e.columns}`} ${e.bombsAmount}`}_configurateSaveResultsAlert(e){const t={width:"310px",height:"130px",headline:"Оповещение",message:`Результат для игрока ${e.nickName} сохранен.`,type:"alert"};this.alert.setSettings(t)}}const O={playField:".play-field"},G={bomb:"<img src='img/bomb.png'>"};class P{constructor(){this.field=document.querySelector(O.playField),this.bombs=[],this.positions=[],this._isTuned=!1,this.otherFunctions=new i}setSettings({rows:e,columns:t,bombsAmount:s}){this.rows=e,this.columns=t,this.bombsAmount=s,this.bombs=this.otherFunctions.getBombs(this.bombsAmount,this.rows,this.columns),this.positions=this.otherFunctions.getPositions(this.bombs,this.rows,this.columns),this.field.style.width=this._countFieldWidth(),this._isTuned=!0}_countFieldWidth(){return 27*this.columns+"px"}draw(){if(this._isTuned){for(let e=0;e<this.rows;e++)this._goThroughTheRow(t=>{this.field.appendChild(this.positions[e][t])});this.field.style.display=d.flex}}_goThroughTheRow(e){for(let t=0;t<this.columns;t++)e(t)}open(){for(let e=0;e<this.rows;e++)this._goThroughTheRow(t=>{const s=this.positions[e][t];s.classList.contains(o.bomb)?(s.innerHTML=G.bomb,s.style.backgroundColor=l.bomb):s.style.backgroundColor=l.clearCell})}hide(){return!!this._isTuned&&(this.field.style.display=d.hidden,!0)}clear(){if(this._isTuned){for(;this.field.children.length>0;)this.field.removeChild(this.field.children[0]);return!0}return!1}}const $={start:".modal__buttons .start",menu:".menu",restart:".menu-list .restart",reset:".menu-list .reset",showRecords:".menu-list .show-records",clearRecords:".menu-list .clear-records",closeTable:".close-table",rows:".modal__content .rows",columns:".modal__content .columns",bombsAmount:".modal__content .bombs-amount"},E={width:"500px",height:"440px",header:"<img src='img/smiling.png'>\n           <h1>Начало игры!</h1>\n           <img src='img/with_tongue.png'>",content:"<p>Имя:</p>\n            <input class='nick-name' value='Player' type='text'>\n            <p>Размер поля:</p>\n            <div>\n              <input class='rows' value='12' type='number'>\n              <input class='columns' value='12' type='number'>\n            </div>\n            <p>Количество бомб:</p>\n            <input class='bombs-amount' value='40' type='number'>",buttons:'<div class="start btn">Поехали!</div>'};!function(){const e=new H,t=(new f,new P),s=new h;new b,function(e){e.setSettings(E),e.tune(),e.show()}(s),function(){const e=document.querySelector($.rows),t=document.querySelector($.columns),s=document.querySelector($.bombsAmount);R.checkNumberInput(e),R.checkNumberInput(t),R.checkNumberInput(s)}();const o=document.querySelector($.start),n=document.querySelector($.menu);e.startGame(o,s,t),e.menuToggle(n),_.set(),function(e,t){const s=document.querySelector($.restart),o=document.querySelector($.reset),n=document.querySelector($.showRecords),l=document.querySelector($.closeTable),i=document.querySelector($.clearRecords);t.restartGame(s,null,e),t.resetGame(o,e),t.showRecordsTable(n),t.hideRecordsTable(l),t.clearRecords(i)}(t,e)}()}]);